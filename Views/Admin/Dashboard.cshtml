@using Job_Portal_Project.ViewModels.Admin
@model AdminDashboardViewModel
@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Admin Dashboard";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<div class="container-fluid py-4">
    <h2 class="mb-4">Overview</h2>
    <div class="row g-4">

        <!-- Total Users -->
        <div class="col-md-3">
            <div class="card bg-primary text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-users fa-2x me-3"></i>
                <div>
                    <h6>Total Users</h6>
                    <h4>@Model.TotalUsers</h4>
                </div>
            </div>
        </div>

        <!-- Total Employers -->
        <div class="col-md-3">
            <div class="card bg-info text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-building fa-2x me-3"></i>
                <div>
                    <h6>Total Employers</h6>
                    <h4>@Model.TotalEmployers</h4>
                </div>
            </div>
        </div>

        <!-- Total Applicants -->
        <div class="col-md-3">
            <div class="card bg-warning text-dark shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-user-graduate fa-2x me-3"></i>
                <div>
                    <h6>Job Seekers</h6>
                    <h4>@Model.TotalApplicants</h4>
                </div>
            </div>
        </div>

        <!-- Total Jobs -->
        <div class="col-md-3">
            <div class="card bg-success text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-briefcase fa-2x me-3"></i>
                <div>
                    <h6>Total Jobs</h6>
                    <h4>@Model.TotalJobs</h4>
                </div>
            </div>
        </div>

        <!-- Active Jobs -->
        <div class="col-md-3">
            <div class="card bg-success text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-toggle-on fa-2x me-3"></i>
                <div>
                    <h6>Active Jobs</h6>
                    <h4>@Model.TotalActiveJobs</h4>
                </div>
            </div>
        </div>

        <!-- Inactive Jobs -->
        <div class="col-md-3">
            <div class="card bg-danger text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-toggle-off fa-2x me-3"></i>
                <div>
                    <h6>Inactive Jobs</h6>
                    <h4>@Model.TotalInactiveJobs</h4>
                </div>
            </div>
        </div>

        <!-- Total Applications -->
        <div class="col-md-3">
            <div class="card bg-dark text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-file-alt fa-2x me-3"></i>
                <div>
                    <h6>Job Applications</h6>
                    <h4>@Model.TotalApplications</h4>
                </div>
            </div>
        </div>

        <!-- Total Companies -->
        <div class="col-md-3">
            <div class="card bg-secondary text-white shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-industry fa-2x me-3"></i>
                <div>
                    <h6>Companies</h6>
                    <h4>@Model.TotalCompanies</h4>
                </div>
            </div>
        </div>

        <!-- Total Categories -->
        <div class="col-md-3">
            <div class="card bg-light text-dark shadow p-3 rounded-4 d-flex flex-row align-items-center">
                <i class="fas fa-layer-group fa-2x me-3"></i>
                <div>
                    <h6>Categories</h6>
                    <h4>@Model.TotalCategories</h4>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-info text-white shadow p-3">
                <h5>Most Active Category</h5>
                <h6>@Model.MostActiveCategoryName @Model.MostActiveCategoryJobCount Jobs</h6>
            </div>
        </div>
        <h4 class="mt-5">Top Companies</h4>

        <div id="companyCarousel" class="carousel slide" data-bs-ride="carousel">
            <!-- Carousel Items -->
            <div class="carousel-inner">
                @for (int i = 0; i < Model.TopCompaniesByJobs.Count; i++)
                {
                    var company = Model.TopCompaniesByJobs[i];
                    <div class="carousel-item @(i == 0 ? "active" : "") text-center">
                        <img src="@Url.Content("~/uploads/logos/" + (company.LogoPath ?? "no-logo.png"))"
                             class="d-block mx-auto"
                             style="height:100px;"
                             alt="@company.CompanyName Logo">
                        <h5 class="mt-3">@company.CompanyName</h5>
                        <p>@company.JobCount Jobs</p>
                    </div>
                }
            </div>

            <!-- Indicators (moved below images) -->
            <div class="carousel-indicators custom-indicators mt-3">
                @for (int i = 0; i < Model.TopCompaniesByJobs.Count; i++)
                {
                    <button type="button"
                            data-bs-target="#companyCarousel"
                            data-bs-slide-to="@i"
                            class="@(i == 0 ? "active" : "")"
                            aria-current="@(i == 0 ? "true" : null)"
                            aria-label="Slide @(i + 1)"></button>
                }
            </div>

            <!-- Controls -->
            <button class="carousel-control-prev" type="button" data-bs-target="#companyCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#companyCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
            </button>
        </div>

        <!-- Custom CSS -->
        <style>
            .carousel-indicators.custom-indicators {
                position: static;
                margin-top: 10px;
            }

                .carousel-indicators.custom-indicators button {
                    width: 12px;
                    height: 12px;
                    border-radius: 50%;
                    background-color: #ccc;
                    border: none;
                    margin: 0 4px;
                    transition: background-color 0.3s;
                }

                .carousel-indicators.custom-indicators .active {
                    background-color: #0d6efd; /* Bootstrap primary */
                }
        </style>



    </div>
</div>
